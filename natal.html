<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Natal Chart</title>
  <style>
    body {
      font-family: sans-serif;
      background: black;
      color: white;
      padding: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    #natalChart {
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 1.1em;
    }
    .planet-entry {
      padding: 6px;
      border-bottom: 1px solid #444;
    }
    .planet-name {
      font-weight: bold;
    }
    .planet-zodiac {
      margin-left: 6px;
      opacity: 0.85;
    }
  </style>
</head>
<body>

<h2>Natal Chart</h2>

<div id="natalChart"></div>

<script src="ephemeris.js"></script>
<script src="zodiac.js"></script>

<script>
function loadNatal() {
  const raw = localStorage.getItem("birthData");
  const container = document.getElementById("natalChart");
  container.innerHTML = "";

  if (!raw) {
    container.innerText = "No birth data saved";
    return;
  }

  const data = JSON.parse(raw);

  // Validate date and time
  if (!data.date || !data.time) {
    container.innerText = "Birth date or time is missing";
    return;
  }

  const dateTime = new Date(`${data.date}T${data.time}`);
  if (isNaN(dateTime)) {
    container.innerText = "Invalid birth date/time format";
    return;
  }

  const longs = planetLongitudes(dateTime);

  Object.keys(longs).forEach(name => {
    const zodiac = getZodiacFromLongitude(longs[name]);
    const div = document.createElement("div");
    div.className = "planet-entry";
    div.innerHTML = `
      <span class="planet-name">${name}</span>
      <span class="planet-zodiac">${zodiac.symbol} ${zodiac.name}</span>
    `;
    container.appendChild(div);
  });
}

// Load chart on page load
loadNatal();
</script>

</body>
</html>
